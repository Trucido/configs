# .fvwm2rc 3.2.2   Time-stamp: <2014-05-06 22:13:45 PDT xoddf2>

# This .fvwm2rc has thin, button-less window decorations, dozens of keybindings,
# sloppy focus, a pager, an icon manager, and other features.  Keybindings were
# inspired by mcwm <http://hack.org/mc/projects/mcwm/> and cwm.  There is an
# 11-pixel-tall gap at the top of the screen to make room for a status bar.  It
# has been tested under FreeBSD 10.0.
#
# The MenuLogins menu is site-specific.  Replace the items in it with your own.

# Virtual Desktops #############################################################

# 3 desks, each with 3 pages
DesktopSize 3x1

# Their names
DesktopName 0 Main
DesktopName 1 Media
DesktopName 2 Emulation

# Disable edge scrolling
EdgeScroll 0 0

# Other ########################################################################

# Make room for Conky and xclock
EwmhBaseStruts 0 0 12 0

# Style ########################################################################

# Focus
Style * SloppyFocus
Style * FPGrabFocus
Style * MouseFocusClickRaises

# Snap
Style * SnapAttraction 16 Screen, Windows

# Placement
Style * MinOverlapPercentPlacement

# Lets certain applications (e.g., XMMS) work better
Style * MWMDecor

# Fonts
DefaultFont -misc-fixed-medium-r-*-*-13-*-*-*-*-*-*-*
Style * Font -misc-fixed-medium-r-*-*-10-*-*-*-*-*-*-*

# Where to find the icons:
ImagePath /usr/local/share/fvwm/pixmaps

# Colours
Colorset 0 fg White, bg DimGrey
Colorset 1 fg White, bg RoyalBlue4
Colorset 2 fg Maroon, bg Grey
Colorset 3 fg Yellow, bg FireBrick

# Window decorations
TitleStyle LeftJustified -- Flat
TitleStyle ActiveUp (Solid Black -- Flat)
TitleStyle ActiveDown (Solid Black -- Flat)
TitleStyle Inactive (Solid Black -- Flat)
Style * Colorset 0, HilightColorset 1
Style * HandleWidth 4

# Menu colours
MenuStyle * MenuColorset 2
MenuStyle WindowList MenuColorset 2

# XClock and modules
Style XClock !Title, HandleWidth 1, Sticky, WindowListSkip, CirculateSkipIcon, FixedPosition, FixedSize, NeverFocus, !Iconifiable, !Maximizable, !Closable
Style FvwmPager !Title, HandleWidth 1, Sticky, WindowListSkip, CirculateSkipIcon, FixedPosition, FixedSize, NeverFocus, !Iconifiable, !Maximizable, !Closable
Style FvwmIconMan !Title, !Borders, Sticky, WindowListSkip, CirculateSkipIcon, FixedPosition, FixedSize, NeverFocus, !Iconifiable, !Maximizable, !Closable
Style FvwmIdent !Title

# Window styles
Style URxvt StartsOnPage 0 0 0, !Title, Icon term.xpm, MiniIcon mini.term.xpm
Style Emacs StartsOnPage 0 1 0, MinOverlapPlacement, !Title, IconOverride, EWMHMiniIconOverride, Icon gnu-animal.xpm, MiniIcon mini.gnu.xpm
Style Firefox StartsOnPage 0 2 0
Style feh StartsOnPage 1 0 0
Style mpv StartsOnPage 1 1 0
Style gimp StartsOnPage 1 2 0
Style QEMU StartsOnPage 2 0 0
Style UAE StartsOnPage 2 1 0
Style Xephyr StartsOnPage 2 2 0

# No iconified windows
Style * NoIcon

# Functions ####################################################################

# SelectWindow (Needed for RunOrRaise)
DestroyFunc SelectWindow
AddToFunc SelectWindow
+ I Focus
+ I Iconify false
+ I Raise

# Run or raise
DestroyFunc RunOrRaise
AddToFunc RunOrRaise
+ I Next ($0) SelectWindow
+ I TestRc (NoMatch) Exec exec $1

# Urgency
DestroyFunc UrgencyFunc
AddToFunc UrgencyFunc
+ I ThisWindow (!Focused) WindowStyle HilightColorset 3
+ I ThisWindow (!Focused) WindowStyle Colorset 3

DestroyFunc UrgencyDoneFunc
AddToFunc UrgencyDoneFunc
+ I WindowStyle Colorset 0
+ I WindowStyle HilightColorset 1

DestroyFunc EWMHActivateWindowFunc

# Leave the pointer alone
DestroyFunc WindowListFunc
AddToFunc WindowListFunc
+ I Iconify off
+ I FlipFocus
+ I Raise

# For modifier+click moving and resizing
DestroyFunc DragMove
AddToFunc DragMove
+ M Move

DestroyFunc DragResize
AddToFunc DragResize
+ M Resize

# Keybindings ##################################################################

# WindowList
Key Tab A M -
Key Tab A 4 WindowList Root c c CurrentAtEnd, IconifiedAtEnd
MenuStyle WindowList SelectOnRelease Super_L

# Raise or lower
Key r A 4 RaiseLower

# Maximise
Key m A 4 Maximize
Key Equal A 4 Maximize 0 100
Key Plus A 4S Maximize 100 0

# Move
Key h A 4 Move w-10p w0p
Key j A 4 Move w0p w+10p
Key k A 4 Move w0p w-10p
Key l A 4 Move w+10p w0p

# Move to corners
Key y A 4 Move 0p 0p
Key u A 4 Move -0p 0p
Key b A 4 Move 0p -0p
Key n A 4 Move -0p -0p

# Resize
Key H A 4S Resize w-10c w0c
Key J A 4S Resize w0c w+10c
Key K A 4S Resize w0c w-10c
Key L A 4S Resize w+10c w0c

# Place again
Key p A 4 PlaceAgain

# Other apps
Key q A 4 RunOrRaise tmux "urxvtc -name tmux -sl 0 -geometry 80x50 -e tmux attach-session"
Key e A 4 RunOrRaise Emacs "emacsclient --alternate-editor='' -c"
Key w A 4 RunOrRaise Firefox firefox

# Iconify
Key Return A 4 Iconify

# Switch to another virtual desktop
Key 1 A 4 GotoDesk 0 0
Key 2 A 4 GotoDesk 0 1
Key 3 A 4 GotoDesk 0 2

# Move window to another virtual desktop
Key 1 A 4S MoveToDesk 0 0
Key 2 A 4S MoveToDesk 0 1
Key 3 A 4S MoveToDesk 0 2

# Switch to another page
Key a A 4 GotoPage 0 0
Key s A 4 GotoPage 1 0
Key d A 4 GotoPage 2 0

# Move window to another page
Key A A 4S MoveToPage 0 0
Key S A 4S MoveToPage 1 0
Key D A 4S MoveToPage 2 0

# Close
Key C A 4S Close

# FvwmConsole
Key Colon A 4 Module FvwmConsole -terminal urxvtc

# Menus
Key Question A 4S Menu MenuFvwmRoot
Key Period A 4 Menu MenuLogins

# Leave
Key Escape A 4 Exec exec xscreensaver-command -lock
Key Backslash A 4S Quit

# Change volume (FreeBSD-specific)
Key Bracketleft A 4 Exec exec mixer vol -1
Key Bracketright A 4 Exec exec mixer vol +1

# Mouse Bindings ###############################################################

# Move or resize
Mouse 1 TSIFW 4 DragMove
Mouse 3 TSIFW 4 DragResize

# Raise or lower window with right mouse button
Mouse 3 FST A RaiseLower

# Left-clicking the root window does nothing:
Mouse 1 R A -

# Menus ########################################################################

DestroyMenu MenuFvwmRoot
AddToMenu MenuFvwmRoot@side.fvwm2.xpm@^Black^ "Root Menu" Title
+ "%mini.term.xpm%URxv&tc" Exec exec urxvtc
+ "%mini.term.xpm%- tmu&x" Exec exec urxvtc -name tmux -sl 0 -geometry 80x50 -e tmux attach-session -d
+ "%mini.gnu.xpm%&Emacs" Exec exec emacsclient --alternate-editor='' -c
+ "%mini.nscape.xpm%&Firefox" Exec exec firefox
+ "" Nop
+ "%mini.gimp.xpm%The &GIMP" Exec exec gimp
+ "" Nop
+ "%mini.windows.xpm%Window &Ops" Popup MenuFvwmWindowOps
+ "" Nop
+ "%button-horiz.xpm%Tile &Horiz" FvwmRearrange -tile -h -u -m -maximize
+ "%button-vert.xpm%Tile &Vert" FvwmRearrange -tile -u -m -maximize
+ "" Nop
+ "%mini.fvwm.xpm%Fv&wmConsole" Module FvwmConsole -terminal urxvtc
+ "" Nop
+ "%mini.hammer.xpm%E&nv/Options" Popup MenuEnvOptions
+ "" Nop
+ "%mini.lock.xpm%&Lock" Exec exec xscreensaver-command -lock
+ "%mini.stop.xpm%Leave" Popup MenuLeave

DestroyMenu MenuFvwmWindowOps
AddToMenu MenuFvwmWindowOps
+ "%mini.move.xpm%&Move" Move
+ "%mini.resize.xpm%&Resize" Resize
+ "%mini.raise.xpm%R&aise" Raise
+ "%mini.lower.xpm%&Lower" Lower
+ "%mini.iconify.xpm%(De)&Iconify" Iconify
+ "%mini.stick.xpm%(Un)&Stick" Stick
+ "%mini.maximize.xpm%(Un)Maximi&ze" Maximize
+ "%mini.maximize-horiz.xpm%- &Horiz" Maximize 100 0
+ "%mini.maximize-vert.xpm%- &Vert" Maximize 0 100
+ "%mini.ray.xpm%Pla&ce Again" PlaceAgain
+ "" Nop
+ "%mini.question.xpm%Ide&ntify" FvwmIdent
+ "" Nop
+ "%mini.pager.xpm%Move to &Desk..." Popup MenuMoveToDesk
+ "%mini.pager.xpm%Move to &Page..." Popup MenuMoveToPage
+ "" Nop
+ "%mini.delete.xpm%Delete (&X)" Delete
+ "%mini.destroy.xpm%Destroy" Destroy

DestroyMenu MenuMoveToDesk
AddToMenu MenuMoveToDesk
+ "&1. $[desk.name0]" MoveToDesk 0 0
+ "&2. $[desk.name1]" MoveToDesk 0 1
+ "&3. $[desk.name2]" MoveToDesk 0 2

DestroyMenu MenuMoveToPage
AddToMenu MenuMoveToPage
+ "&a. Left" MoveToPage 0 0
+ "&s. Central" MoveToPage 1 0
+ "&d. Right" MoveToPage 2 0

DestroyMenu MenuEnvOptions
AddToMenu MenuEnvOptions
+ "%mini.x.xpm%Reset X &Resources" Exec exec xrdb -merge ~/.Xresources
+ "%mini.keyboard.xpm%&CAPS LOCK as Compose" Exec exec setxkbmap -option "compose:caps"
+ "" Nop
+ "%mini.lock.xpm%Start X&ScreenSaver" Exec exec xscreensaver -no-splash
+ "%mini.term.xpm%URxv&td" Exec exec urxvtd -q -o -f

DestroyMenu MenuLeave
AddToMenu MenuLeave "Leave" Title
+ "%mini.turn.xpm%&Restart FVWM" Restart
+ "" Nop
+ "%mini.twm.xpm%Restart &twm" Restart twm
+ "%mini.xterm.xpm%Restart &xterm" Restart xterm
+ "" Nop
+ "%mini.exclam.xpm%Exit" Quit

DestroyMenu MenuLogins
AddToMenu MenuLogins "Remote Logins" Title
+ "%mini.ball.xpm%archon.darkfox.id.a&u" Exec exec urxvtc -name ssh -e ssh archon.darkfox.id.au
+ "%mini.ball.xpm%&is.not.a.haxor.se" Exec exec urxvtc -name ssh -e ssh is.not.a.hax0r.se
+ "%mini.ball.xpm%&sunnyday.alisonc.net" Exec exec urxvtc -name ssh -e ssh sunnyday.alisonc.net
+ "" Nop
+ "%mini.keys.xpm%&Add Key" Exec exec ssh-add
+ "%mini.keys.xpm%&Delete Key" Exec exec ssh-add -D

# Modules ######################################################################

DestroyModuleConfig FvwmPager: *
*FvwmPager: Font -misc-fixed-medium-r-*-*-10-*-*-*-*-*-*-*
*FvwmPager: Geometry 125x175-0+12
*FvwmPager: Rows 3
*FvwmPager: Columns 1
*FvwmPager: Back Grey10
*FvwmPager: Fore Grey75
*FvwmPager: Hilight Grey25
*FvwmPager: MiniIcons
*FvwmPager: Balloons
*FvwmPager: BalloonFont -misc-fixed-medium-r-*-*-10-*-*-*-*-*-*-*
*FvwmPager: BalloonBack Yellow
*FvwmPager: BalloonFore Black
*FvwmPager: BalloonBorderColor Black

DestroyModuleConfig FvwmIconMan: *
*FvwmIconMan: ManagerGeometry 1x5-0-0
*FvwmIconMan: ButtonGeometry 300x16
*FvwmIconMan: Shape true
*FvwmIconMan: Action Mouse 1 N sendcommand Focus
*FvwmIconMan: Action Mouse 2 N sendcommand Iconify
*FvwmIconMan: Action Mouse 3 N sendcommand FvwmIdent
*FvwmIconMan: Format "%i"
*FvwmIconMan: Background Grey10
*FvwmIconMan: Foreground White
*FvwmIconMan: IconButton up White DimGrey
*FvwmIconMan: PlainButton up Black DarkGrey
*FvwmIconMan: SelectButton down Black DarkGrey
*FvwmIconMan: FocusButton up White RoyalBlue4
*FvwmIconMan: FocusAndSelectButton down White RoyalBlue4
*FvwmIconMan: Font -misc-fixed-medium-r-*-*-13-*-*-*-*-*-*

DestroyModuleConfig FvwmIdent: *
*FvwmIdent: Back Navy
*FvwmIdent: Fore Yellow
*FvwmIdent: Font -misc-fixed-medium-r-*-*-13-*-*-*-*-*-*-*

# StartFunction and InitFunction ###############################################

AddToFunc StartFunction
+ I Module FvwmCommandS
+ I Module FvwmPager 0 2
+ I Module FvwmIconMan

# To make sure Emacs and tmux end up in the correct places:
AddToFunc InitFunction
+ I All PlaceAgain
