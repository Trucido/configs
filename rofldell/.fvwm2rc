# .fvwm2rc 2.2   Time-stamp: <2014-02-02 15:20:08 xoddf2>

# This is a somewhat minimalist .fvwm2rc.  It has only two modules, no icons,
# no title bars, and thin borders.
#
# Most actions are available via both the keyboard and the mouse.  Keybindings
# use the Mod4 key to avoid conflicting with other applications.  Certain
# applications can be raised if they are already running, or started if not.
# Windows can be moved or resized by holding Mod4 and dragging with the mouse.
#
# Window decorations are DarkRed for active and DarkBlue for inactive to make
# them easier to see.
#
# Certain applications (Emacs, Iceweasel, The GIMP, QEMU) start in specific
# pages.
#
# Due to MinOverlapPercentPlacement, FVWM puts windows in sane positions.
#
# There is an FvwmButtons at the bottom right with FvwmPager, xclock, and xload
# swallowed.  Icons are disabled, and there is no FvwmIconMan.  Iconified
# windows are accessible from the WindowList menu.

# General ######################################################################

# See FVWM FAQ entry 5.5 <http://fvwm.org/documentation/faq/#toc_5.5>
IgnoreModifiers L25

# 4 pages instead of 9
DeskTopSize 2x2

# Disable changing pages by moving the pointer to the edge of the screen:
EdgeScroll 0 0

# Style ########################################################################

# Focus
Style * SloppyFocus
Style * FPGrabFocus

# Snap
Style * SnapAttraction 16 Screen

# Place the windows better
Style * MinOverlapPercentPlacement

# This line makes XMMS, Audacious, mplayer -noborder, and similar work properly:
Style * MWMDecor

# Reduce the window decorations to a 1-pixel border:
Style * !Title
Style * BorderWidth 1, HandleWidth 1

# Colour the window borders:
Style * Color White/DarkBlue
Style * HilightBack DarkRed, HilightFore White

# Module style
Style FvwmButtons !Title, !Borders, NeverFocus, !Iconifiable, !Maximizable, !Closable, Sticky, WindowListSkip, CirculateSkipIcon, FixedPosition, FixedSize

# Application-specific style
Style Emacs StartsOnPage 0 0
Style Iceweasel StartsOnPage 1 0
Style gimp StartsOnPage 0 1
Style qemu* StartsOnPage 1 1

# Disable icons
Style * NoIcon

# Functions ####################################################################

# Do nothing at urgency and don't steal focus
DestroyFunc UrgencyFunc
DestroyFunc EWMHActivateWindowFunc

# Prevent WindowListFunc from warping the pointer to the top left corner
DestroyFunc WindowListFunc
AddToFunc WindowListFunc
+ I Iconify off
+ I FlipFocus
+ I Raise

# For modifier+click moving and resizing
DestroyFunc DragMove
AddToFunc DragMove
+ M Move

DestroyFunc DragResize
AddToFunc DragResize
+ M Resize

# SelectWindow (Needed for RunOrRaise)
DestroyFunc SelectWindow
AddToFunc SelectWindow
+ I Focus
+ I Iconify false
+ I Raise

# Run or raise
DestroyFunc RunOrRaise
AddToFunc RunOrRaise
+ I Next ($0) SelectWindow
+ I TestRc (NoMatch) Exec exec $1

# Keybindings ##################################################################

# WindowList
Key Tab A M -
Key Tab A 4 WindowList Root c c CurrentAtEnd, IconifiedAtEnd
MenuStyle WindowList SelectOnRelease Super_L

# Menus
Key Grave A 4 Popup MenuFvwmRoot
Key o A 4 Popup MenuFvwmWindowOps

# Launch, run, or raise certain applications
Key c A 4 Exec exec xterm
Key C A 4S RunOrRaise tmux "xterm -name tmux -sl 0 -e tmux attach-session -d"
Key e A 4 RunOrRaise Emacs "emacsclient --alternate-editor='' -c"
Key w A 4 RunOrRaise Iceweasel iceweasel

# Lock screen
Key Escape A 4 Exec exec xscreensaver-command -lock

# FvwmConsole
Key Colon A 4 Module FvwmConsole

# Window ops
Key Return A 4 Iconify
Key k A 4S Close
Key z A 4 Maximize
Key equal A 4 Maximize 0 100
Key plus A 4S Maximize 100 0
Key Space A 4 RaiseLower
Key p A 4 PlaceAgain
Key Question A 4 FvwmIdent

# Switch to page...
Key 1 A 4 GotoPage 0 0
Key 2 A 4 GotoPage 1 0
Key 3 A 4 GotoPage 0 1
Key 4 A 4 GotoPage 1 1
Key 0 A 4 GotoPage Prev

# Move window to page...
Key 1 A 4S MoveToPage 0 0
Key 2 A 4S MoveToPage 1 0
Key 3 A 4S MoveToPage 0 1
Key 4 A 4S MoveToPage 1 1
Key 0 A 4S MoveToPage Prev

# Move window
Key Up A 4 Move w0p w-1p
Key Down A 4 Move w0p w+1p
Key Left A 4 Move w-1p w0p
Key Right A 4 Move w+1p w0p

# Move window by 10 pixels
Key Up A 4S Move w0p w-10p
Key Down A 4S Move w0p w+10p
Key Left A 4S Move w-10p w0p
Key Right A 4S Move w+10p w0p

# Resize window
Key Up A 4C Resize w0c w-1c
Key Down A 4C Resize w0c w+1c
Key Left A 4C Resize w-1c w0c
Key Right A 4C Resize w+1c w0c

# Resize window by 10 pixels
Key Up A 4CS Resize w0c w-10c
Key Down A 4CS Resize w0c w+10c
Key Left A 4CS Resize w-10c w0c
Key Right A 4CS Resize w+10c w0c

# Tiling
Key t A 4 FvwmRearrange -tile -h -u -m -maximize
Key T A 4S FvwmRearrange -tile -u -m -maximize

# Mouse Bindings ###############################################################

# What to do when clicking the root window
Mouse 2 R A Menu MenuFvwmWindowOps Nop
Mouse 3 R A WindowList

# Move or resize window with SUPER+mouse
Mouse 1 TSIFW 4 DragMove
Mouse 3 TSIFW 4 DragResize

# Menus ########################################################################

DestroyMenu MenuFvwmRoot
AddToMenu MenuFvwmRoot "Root Menu" Title
+ "X&Term" Exec exec xterm
+ "- tmu&x" Exec exec xterm -name tmux -sl 0 -e tmux attach-session -d
+ "&Emacs" Exec exec emacsclient --alternate-editor='' -c
+ "&Iceweasel" Exec exec iceweasel
+ "" Nop
+ "The &GIMP" Exec exec gimp
+ "" Nop
+ "Tile &Horiz" FvwmRearrange -tile -h -u -m -maximize
+ "Tile &Vert" FvwmRearrange -tile -u -m -maximize
+ "" Nop
+ "Fv&wmConsole" Module FvwmConsole
+ "" Nop
+ "&Lock" Exec exec xscreensaver-command -lock
+ "Leave" Popup MenuLeave

DestroyMenu MenuFvwmWindowOps
AddToMenu MenuFvwmWindowOps "Window Ops" Title
+ "&Move" Move
+ "&Resize" Resize
+ "R&aise" Raise
+ "&Lower" Lower
+ "(De)&Iconify" Iconify
+ "(Un)&Stick" Stick
+ "(Un)Ma&ximize" Maximize
+ "- &Horiz" Maximize 100 0
+ "- &Vert" Maximize 0 100
+ "Pla&ce Again" PlaceAgain
+ "" Nop
+ "Ide&ntify" FvwmIdent
+ "" Nop
+ "Move to &Page..." Popup MenuMoveToPage
+ "" Nop
+ "&Delete" Delete
+ "Destroy" Destroy

DestroyMenu MenuMoveToPage
AddToMenu MenuMoveToPage "Move to..." Title
+ "&1. $[gt.Northwest]" MoveToPage 0 0
+ "&2. $[gt.Northeast]" MoveToPage 1 0
+ "&3. $[gt.Southwest]" MoveToPage 0 1
+ "&4. $[gt.Southeast]" MoveToPage 1 1

DestroyMenu MenuLeave
AddToMenu MenuLeave "Leave" Title
+ "&Restart FVWM" Restart
+ "" Nop
+ "Restart &twm" Restart twm
+ "Restart &xterm" Restart xterm
+ "" Nop
+ "Exit" Quit

# Modules ######################################################################

DestroyModuleConfig FvwmPager: *
*FvwmPager: Font none
*FvwmPager: Back Grey5
*FvwmPager: Fore Grey25
*FvwmPager: MiniIcons
*FvwmPager: Balloons
*FvwmPager: BalloonFore White
*FvwmPager: BalloonBack Black
*FvwmPager: BalloonBorderColor White

DestroyModuleConfig FvwmButtons: *
*FvwmButtons: Rows 1
*FvwmButtons: Columns 5
*FvwmButtons: Padding 2 2
*FvwmButtons: Frame 1
*FvwmButtons: Back Grey10
*FvwmButtons: Geometry 320x64-0-0
*FvwmButtons: (3x1, Swallow "xload" `Exec exec xload`)
*FvwmButtons: (Swallow "xclock" `Exec exec xclock`)
*FvwmButtons: (Frame 0, Swallow "FvwmPager" `Module FvwmPager 0 0`)

# StartFunction ################################################################

AddToFunc StartFunction
+ I Module FvwmCommandS
+ I Module FvwmButtons
