// $Id: .conkerorrc,v 1.0 2013/12/07 17:51:17 xoddf2 Exp $

// Proxy
session_pref('network.proxy.http', "localhost");
session_pref('network.proxy.http_port', 8123);
session_pref('network.proxy.ssl', "localhost");
session_pref('network.proxy.ssl_port', 8123);

// Functions
function echo_message(window, message) {
    window.minibuffer.message(message);
}

interactive("proxy-toggle", "Toggles between the proxy and a direct connection.",
	    function (I) {
		var p = "network.proxy.type";
		if (get_pref(p)) {
		    session_pref(p, 0);
		    echo_message(I.window, "Proxy disabled");
		}
		else {
		    session_pref(p, 1);
		    echo_message(I.window, "Proxy enabled");
		}
	    });

interactive("javascript-toggle", "Toggles JavaScript enabled and disabled.",
	    function (I) {
		var p = "javascript.enabled";
		if (get_pref(p)) {
		    session_pref(p, false);
		    echo_message(I.window, "JavaScript disabled");
		}
		else {
		    session_pref(p, true);
		    echo_message(I.window, "JavaScript enabled");
		}
	    });

// Searches
define_webjump("duckduckgo", "https://duckduckgo.com/lite/?q=%s");

// Disable clock
remove_hook("mode_line_hook", mode_line_adder(clock_widget));

// Keybindings
define_key(content_buffer_normal_keymap, "f2", "proxy-toggle");
define_key(content_buffer_normal_keymap, "f4", "javascript-toggle");
